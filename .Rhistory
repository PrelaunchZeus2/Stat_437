library(nycflights13)
library(dplyr)
head(flights) #check first rows
str(flights) #check object types
#filter(filter{dpylr}), if code breaks try dplyr::filter(data, ...)
dplyr::filter(flights, year == 2013, month %in% c(11,12), tailnum == 'N14228') #select rows from flights where the year is 2013, month is 11 or 12 and tail number is N14228
#or select operation where arr_delay is <= 120 and dep_delay is <= 120
filter(flights, !arr_delay > 120 | dep_delay > 120)# | is or for single values, for vectors use || for element wise and/or
#arrange is the order operation
#arrange(arrange{dplyr}); arrange(data, ...)
#order rows of flights by year number, month number, and day number
arrange(flights, year, month, day)
#select keeps columns whose names are specified
#select(select{dplyr}); select(data, ...)
#keep columns of flights with column names year up till day
select(flights, year:day)
#select all columns EXCEPT (-) those from year to day
select(flights, -(year:day))
#add a new column that calculates the speed of the flight as the distance / air tme * 60 for minutes
newA = mutate(flights_sml, gain = arr_delay - dep_delay, speed = distance / air_time * 60)
#create smaller df by selecting some columns
flights_sml = select(flights, year:day, ends_with("delay"), distance,air_time)
head(flights_sml)
#add a new column that calculates the speed of the flight as the distance / air tme * 60 for minutes
newA = mutate(flights_sml, gain = arr_delay - dep_delay, speed = distance / air_time * 60)
newA[1:3,(ncol(newA)-3):ncol(newA)]
#find flights faster than the sound barrier?
select(newA, speed > 770)
print(newA)
#find flights faster than the sound barrier?
select(newA, speed > 770)
#find flights faster than the sound barrier?
arrange(newA, speed)
?arrange
#find flights faster than the sound barrier?
arrange(newA, desc(speed))
#pick some columns to create smaller data set
flights_sml = flights %>% select(year:day)
head(flights_sml)
#find flights faster than the sound barrier?
sound_speed = newA %>% select(speed > 770)
#find flights faster than the sound barrier?
sound_speed = newA %>% desc(speed)
#sound barrier
sound = newA %>% filter(speed >= 770)
head(sound)
#sound barrier
sound = newA %>% filter(speed >= 720)
head(sound)
#summarise grouped data created by group_by the output has one row for each group
#summarise(summarise{dplyr}); summarise(data, ...)
summarise(newA)
#related to HW1
#obtain mean arr_delay by moth and carrier for 2 months and 3 carriers
tmp = flights %>% select(month, arr_delay, carrier) %>% filter(month %in% 1:2, carrier %in% C("UA", "AA", "US"))
#related to HW1
#obtain mean arr_delay by moth and carrier for 2 months and 3 carriers
tmp = flights %>% select(month, arr_delay, carrier) %>% filter(month %in% 1:2, carrier %in% c("UA", "AA", "US"))
tmp = na.omit(tmp)
sm = tmp %>% group_by(month, carrier) %>% summarise(mean_arr_delay = mean(arr_delay)) %>% as.data.frame
head(sm)
?flights
sum(flights~carrier)
count(flights~carrier)
?count
sum_carriers %>% count(flights, carrier)
count(flights, carriier)
count(flights, carrier)
?%in%
#carriers
flights %>% count(carrier)
?ggplot2
??ggplot2
group_by <- select(flights)
View(group_by)
library(plyr)
detach(plyr)
detach('plyr')
unloadNamespace(plyr)
unloadNamespace('plyr')
unloadNamespace("plyr")
